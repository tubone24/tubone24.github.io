import{q as t,a as e,O as n,l as r,d as o,A as i,b as a}from"./header-491e4c50.js";function u(){const t={};return(e,n)=>{const{regexp:r,keys:o}=(e=>t[e]||(t[e]=l(e)))(e||""),i=r.exec(n);if(!i)return[!1,null];return[!0,o.reduce((t,e,n)=>(t[e.name]=e.repeat?i[n+1]?i[n+1].split("/"):[]:i[n+1],t),{})]}}const s=t=>t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),c=(t,e,n)=>{let r=t?"((?:[^\\/]+?)(?:\\/(?:[^\\/]+?))*)":"([^\\/]+?)";return e&&n&&(r="(?:\\/"+r+")"),r+(e?"?":"")},l=t=>{const e=/:([A-Za-z0-9_]+)([?+*]?)/g;let n=null,r=0,o="";const i=[];for(;null!==(n=e.exec(t));){const[a,u,l]=n,p="+"===l||"*"===l,d="?"===l||"*"===l,f=d&&"/"===t[n.index-1]?1:0,h=t.substring(r,n.index-f);i.push({name:u,repeat:p}),r=e.lastIndex,o+=s(h)+c(p,d,f)}return o+=s(t.substring(r)),{keys:i,regexp:new RegExp("^"+o+"(?:\\/)?$","i")}};class p{routes;matcher=u();constructor(t){this.routes=t}getRoute(t){for(const e of this.routes){const[n,r]=this.matcher(e[0],t);if(n)return[e,r]}return[null,{}]}}const d=t(["",()=>{}]);function f(t){const[n,u]=r(window.location.pathname),[s,c]=o(()=>t.router.getRoute(n),[t.router,n]),l=i(t=>{window.history.pushState(null,"",t),u(t)},[u]);a(()=>{!function(t,e){function n(n){if(!n||!n.getAttribute)return;const r=n.getAttribute("href"),o=n.getAttribute("target");if(!r||!r.match(/^\//g)||o&&!o.match(/^_?self$/i))return;const[i]=t.getRoute(r);return!!i&&(e(r),!0)}addEventListener("click",t=>{if(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||0!==t.button)return;let e=t.target;do{if("A"===String(e.nodeName).toUpperCase()&&e.getAttribute("href")){if(e.hasAttribute("native"))return;if(n(e))return t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),void t.preventDefault()}}while(e=e.parentNode)})}(t.router,l),window.addEventListener("popstate",t=>{u(window.location.pathname)})},[t.router,l]);const[p,d]=r([t.initialPage,n,c]);return a(()=>{s?m(s[1][0](),s[1][1],n).then(t=>{d([t,n,c])}).catch(t=>{console.error(t),window.location.pathname=n}):d([null,n,c])},[s,n,c]),e(h,{App:t.app,page:p,navigate:l})}const h=function(t,n){function r(t){const e=this.props.ref,r=e==t.ref;return!r&&e&&(e.call?e(null):e.current=null),n?!n(this.props,t)||!r:function(t,e){for(const n in t)if("__source"!==n&&!(n in e))return!0;for(const n in e)if("__source"!==n&&t[n]!==e[n])return!0;return!1}(this.props,t)}function o(n){return this.shouldComponentUpdate=r,e(t,n)}return o.displayName="Memo("+(t.displayName||t.name)+")",o.prototype.isReactComponent=!0,o._forwarded=!0,o}(t=>{const{App:n,page:r,navigate:o}=t,[i,a,u]=r;return e(d.Provider,{value:[a,o]},e("div",null,e(n,null,null===i?e(g,null):e(i,{route:u}))))});async function m(t,n,r){const[o,i]=await Promise.all([t.then(t=>t.default),(async()=>{if(n){const t=await fetch(`/_dext/${r.slice(1)||"index"}.json`,{headers:{accepts:"application/json"}});if(404===t.status)return;return t.json()}})()]);return t=>n&&void 0===i?e(g,null):e(o,{route:t.route,data:i})}function g(){return e("div",null,"404 not found")}!async function(t,r){const o=new p(t),i=window.location.pathname,[a]=o.getRoute(i);if(!a)throw new Error("Failed to match inital route.");const u=await m(a[1][0](),a[1][1],i);n(e(f,{router:o,app:r,initialPage:u}),window.document.getElementById("__dext"))}([["/",[()=>import("./index-12923082.js"),!1]],["/user/:name",[()=>import("./user-[name]-740fa2e2.js"),!1]]],(function(t){return t.children}));//# sourceMappingURL=main-674ae998.js.map
